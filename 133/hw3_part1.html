<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="description" content="homework #3 part1 Javascript CNIT133">
    <title>Hw#3 part 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="../css/hw3.css">
    <!--jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
  <div class="wrapper">
    <nav>
      <ul>
        <li><a href="hw3.html">Home</a> -</li>
        <li><a class="active" href="hw3_part1.html">Part 1</a> -</li>
        <li><a href="hw3_part2.html">Part 2</a> -</li>
        <li><a href="hw3_part3.html">Part 3</a> -</li>
        <li><a href="hw3_part4.html">Part 4</a> </li>
      </ul>
    </nav>
    <h1>Hw #3 Part 1</h1>
    <div class="panel">
      <p> The following webpage contains the heading, Student Grades, and uses a script that inputs a student's homework average,
          mid-term exam score, final exam score, and ACR (all as integers). Calculate the student's final average according to the
          formula: <br>Final average = (0.5 * hwAvg) + (0.2 * midExam) + (0.2 * finalExam) + (0.1 * ACR)<p>
    </div>
    <p class="flip"> Click to Show/Hide Instructions</p>
    <div class="inner-wrapper">
      <h2>Student Grades</h2>
      <form class="gradesForm">
        <table id="myTable">
          <tr>
            <td>Homework Average: </td>
            <td><input type="number" class="numField hwAverage" maxlength="3" value=""</td>
          </tr>
          <tr>
            <td>Midterm Exam: </td>
            <td><input type="number" class="numField midterm" maxlength="3"  value=""</td>
          </tr>
          <tr>
            <td>Final Exam: </td>
            <td><input type="number" class="numField finalExam" maxlength="3"  value=""</td>
          </tr>
          <tr>
            <td>ACR: </td>
            <td><input type="number" class="numField acr"  maxlength="3" value=""</td>
          </tr>
        </table>
        <input type="button" value="SUBMIT" id="submitButton">
        <input type="reset" value="RESET" id="resetButton">
      </form>
      <div id="messageOutput">
      </div>
    </div>
  </div>
  <script>
    var hwAvg = parseInt($(".hwAverage").val());
    var midExam = parseInt($(".midterm").val());
    var finalExam = parseInt($(".finalExam").val());
    var acr = parseInt($(".acr").val());
    var letterGrade;
    var finalAverage;
    var retake = false;
    var invalidInput = false;

    function getValues(){

      hwAvg = parseInt($(".hwAverage").val());
      midExam = parseInt($(".midterm").val());
      finalExam = parseInt($(".finalExam").val());
      acr = parseInt($(".acr").val());
      var values = [hwAvg, midExam, finalExam, acr];
      values.forEach(function(val){
        if (!Number.isInteger(val) || val < 0 || val > 100 ){
          invalidInput = true;
        }
      });
    }

    function calculateFinalGrades(){
      finalAverage = Math.round((.5 * hwAvg) + (.2 * midExam) + (.2 * finalExam) + (.1 * acr));

      if(finalAverage <= 59){
        letterGrade = "F";
        retake = true;
      } else  if(finalAverage <= 69){
        letterGrade = "D";
        retake = true;
      } else  if(finalAverage <= 79){
        letterGrade = "C";
      } else  if(finalAverage <= 89){
        letterGrade = "B";
      } else {
        letterGrade = "A";
      }
    }

    function display(){
      $('#myTable > tbody:last-child').append(`<tr class="output"><td>Final Average: </td>
                                              <td><input type="number" class="numField FinalAvg" disabled maxlength="3"
                                              value="${finalAverage}"</td></tr><tr class="output"><td>Final Letter Grade: </td><td><input type="text"
                                              class="numField FinalAvg" disabled maxlength="3" value="${letterGrade}"</td></tr>`);
      if(retake){
        $("#messageOutput").append("<p class='output retake-msg'>Student must retake the course</p>");
      }
      $("#submitButton").prop("disabled",true);
    }

    function clear(){
      retake = false;
      invalidInput = false;
      $(".output").remove();
    }


    $("#submitButton").click(function(){
      clear();
      getValues();
      if(invalidInput){
        $("#messageOutput").html("<p class='output retake-msg'>Values must be between 0 and 100</p>");
      } else{
        calculateFinalGrades();
        display();
      }
    });

    $("#resetButton").click(function(){
      $("#submitButton").prop("disabled",false);
      $(".output").remove();
      retake = false;
      invalidInput = false;
    });



    $(".flip").click(function(){
      $(".panel").slideToggle("slow");
    });

  </script>
</body>
</html>
